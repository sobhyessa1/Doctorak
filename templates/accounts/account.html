{% extends 'base4.html' %}
{% load static %}

{% block title %}Account{% endblock %}

{% block content %}
<style>
    .readonly-field {
        background-color: #e9ecef;
        color: #6c757d;
        cursor: not-allowed;
    }
    #section_account {
        border: 1px solid #bbb;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        border-radius: 15px;
        margin-top: 2rem;
        background-color: #fff;
    }
    .form_account {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
    }
    .form_account img {
        max-width: 200px;
        max-height: 200px;
    }
    .form_account .form-group {
        width: 100%;
        margin: 1rem;
    }
    .form_account .btn {
        background-color: #2bb8c1;
        border: none;
        padding:0.5rem;
        border-radius:0.3rem;
        width:6rem;
        margin-top:9rem;
        margin-start:5rem;
        height:3rem;
   
        transition: background-color 0.3s, transform 0.3s;
        font-size: 14px;
        font-weight: bold;
        color: #fff;
    }
    .form_account .btn:hover {
        background-color: #239da5;
        transform: scale(1.05);
    }
    .row {
        margin-left: 2rem;
    }
</style>
<main>
    <section id="section_account" class="container">
        {% if request.user.is_authenticated %}
        <form class="form_account" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="inputfirstname">First Name:</label>
                        <input type="text" class="form-control" id="inputfirstname" name="firstname" required value="{{ fname }}">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="inputlastname">Last Name:</label>
                        <input type="text" class="form-control" id="inputlastname" name="lastname" required value="{{ lname }}">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="inputusername">Username:</label>
                        <input type="text" class="form-control readonly-field" id="inputusername" name="username" required value="{{ user }}" readonly>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="inputpassword">Password:</label>
                        <input type="password" class="form-control" id="inputpassword" name="password" required value="{{ password }}">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="inputphone">Phone:</label>
                        <input type="text" class="form-control" id="inputphone" name="phone" required value="{{ phone }}">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="inputemail">Email:</label>
                        <input type="email" class="form-control readonly-field" id="inputemail" name="email" required value="{{ email }}" readonly>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="inputcity">City:</label>
                        <select class="form-control" id="inputcity" name="city" required>
                            <option value="Cairo" {% if city == "Cairo" %}selected{% endif %}>Cairo</option>
                            <option value="Alexandria" {% if city == "Alexandria" %}selected{% endif %}>Alexandria</option>
                            <option value="Giza" {% if city == "Giza" %}selected{% endif %}>Giza</option>
                            <option value="Luxor" {% if city == "Luxor" %}selected{% endif %}>Luxor</option>
                            <option value="Aswan" {% if city == "Aswan" %}selected{% endif %}>Aswan</option>
                            <option value="Asyut" {% if city == "Asyut" %}selected{% endif %}>Asyut</option>
                            <option value="Beheira" {% if city == "Beheira" %}selected{% endif %}>Beheira</option>
                            <option value="Beni Suef" {% if city == "Beni Suef" %}selected{% endif %}>Beni Suef</option>
                            <option value="Dakahlia" {% if city == "Dakahlia" %}selected{% endif %}>Dakahlia</option>
                            <option value="Damietta" {% if city == "Damietta" %}selected{% endif %}>Damietta</option>
                            <option value="Faiyum" {% if city == "Faiyum" %}selected{% endif %}>Faiyum</option>
                            <option value="Gharbia" {% if city == "Gharbia" %}selected{% endif %}>Gharbia</option>
                            <option value="Ismailia" {% if city == "Ismailia" %}selected{% endif %}>Ismailia</option>
                            <option value="Kafr El Sheikh" {% if city == "Kafr El Sheikh" %}selected{% endif %}>Kafr El Sheikh</option>
                            <option value="Matrouh" {% if city == "Matrouh" %}selected{% endif %}>Matrouh</option>
                            <option value="Minya" {% if city == "Minya" %}selected{% endif %}>Minya</option>
                            <option value="Monufia" {% if city == "Monufia" %}selected{% endif %}>Monufia</option>
                            <option value="New Valley" {% if city == "New Valley" %}selected{% endif %}>New Valley</option>
                            <option value="North Sinai" {% if city == "North Sinai" %}selected{% endif %}>North Sinai</option>
                            <option value="Port Said" {% if city == "Port Said" %}selected{% endif %}>Port Said</option>
                            <option value="Qalyubia" {% if city == "Qalyubia" %}selected{% endif %}>Qalyubia</option>
                            <option value="Qena" {% if city == "Qena" %}selected{% endif %}>Qena</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="inputgender">Gender:</label>
                        <select class="form-control" id="inputgender" name="gender" required>
                            <option value="Male" {% if gender == "Male" %}selected{% endif %}>Male</option>
                            <option value="Female" {% if gender == "Female" %}selected{% endif %}>Female</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="inputage">Age:</label>
                        <input type="number" class="form-control" id="inputage" name="age" required value="{{ age }}">
                    </div>
                </div>
            </div>
            {% if description %}
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="description">Description:</label>
                        <textarea class="form-control" id="description" name="description" rows="5">{{ description }}</textarea>
                    </div>
                </div>
            </div>
            {% endif %}
            {% if degree_certificate or syndicate_card %}
            <div class="row">
                {% if degree_certificate %}
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="degree_certificate">شهادة الدرجة العلمية:</label>
                        <img id="degree_certificate" class="img-fluid" src="{{ degree_certificate }}" alt="شهادة الدرجة العلمية">
                    </div>
                </div>
                {% endif %}
                {% if syndicate_card %}
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="syndicate_card">بطاقة النقابة:</label>
                        <img id="syndicate_card" class="img-fluid" src="{{ syndicate_card }}" alt="بطاقة النقابة">
                    </div>
                </div>
                {% endif %}
            </div>
            {% endif %}
            <button type="submit" class="btn btn-primary" name="btnsave">Edit Profile</button>
        </form>
        {% else %}
        <h4 class="alert alert-danger">
            You must be <a href="{% url 'signin' %}" class="text-dark">logged in</a>
        </h4>
        {% endif %}
    </section>

    <!-- Modal for image display -->
    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01">
    </div>

    <style>
        .readonly-field {
            background-color: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
        }
    </style>

    <script>
        // Get the modal
        var modal = document.getElementById('myModal');

        // Get the images and bind click event
        var images = document.getElementsByClassName('img-fluid');
        var modalImg = document.getElementById("img01");
        for (let img of images) {
            img.onclick = function () {
                modal.style.display = "block";
                modalImg.src = this.src;
            }
        }

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal image, close the modal
        modal.onclick = function (event) {
            if (event.target !== modalImg) {
                modal.style.display = "none";
            }
        }
    </script>
</main>
{% endblock %}
